{% extends 'base/base.html' %}

{% load staticfiles %}
{% load breadcrumbs %}
{% block page_id %}order-edit{%endblock%}
{% block page_title %}Order{%endblock%}
{% block page_description %}

{% if order %}Editing Order: {{order.id}}#{{order.customer.name}}{% else %}Add Order{% endif %}
{%endblock%}

{% block breadcrumbs %}
  {% breadcrumb_url 'Orders' 'order:order-list-short' %}
  {%if order %}
    {% breadcrumb_last order.customer.name %}
  {%else%}
    {% breadcrumb_last 'New Order' %}
  {%endif%}
{% endblock %}

{% block page_content %}

    <!-- BEGIN SAMPLE FORMPORTLET-->
    <form id='form' method='post' action='' class='form-horizontal' data-pk='{{order.pk|default:""}}' enctype="multipart/form-data">
      {% csrf_token %}
      <div class="row-fluid">
          <div class="span12">
            <div class="widget">
                <div class="widget-title">
                  <h4><i class="fa fa-video-camera"></i> {% if order %}{{order.id}}#{{order.customer.name}} Order Detail{% else %}Add Order{% endif %}</h4>
                  {% if order %}
                  <div class="actions">
                    <a type='button' class="delete btn btn-danger btn-mini"><i class="fa fa-trash"></i> Delete</a>
                  </div>
                  {% endif %}
                </div>
                <div class="widget-body">
                  <div class="row-fluid">
                    <div class="span8">
                      <div class="control-group">
                        <label class="control-label">Name</label>
                        <div class="controls input-icon">
                          {{form.name}}
                        </div>
                      </div>

                      <div class="control-group">
                        <label class="control-label" for="id_logo">Logo</label>
                        <div class="controls">
                          <input id="id_logo" name="logo" type="file" class="hide" accept="image/png, image/jpeg" >
                          <div class="input-append">
                            <input id="id_logo_dummy" data-fileplaceholder='logo' class="input-large" disabled type="text" placeholder="Choose logo image">
                            <a class="btn logo_browse">Browse</a>
                          </div>
                          <div class="clearfix"></div>
                          <span id="logo-error" class="help-inline alert-error hide"></span>
                        </div>
                      </div>

                      <div class="control-group {% if form.number.errors %}error{% endif %}">
                        <label class="control-label">Number</label>
                        <div class="controls">
                          {{form.number}}
                          {% if form.number.errors %}
                          <span class="input-error error"><i class="fa fa-exclamation-circle"></i></span>
                          <span class="help-inline error">{{form.number.errors}}</span>
                          {% endif %}

                        </div>
                      </div>

                      <div class="control-group {% if form.categories.errors %}error{% endif %}">
                        <label class="control-label">Categories</label>
                        <div class="controls">
                          {{form.categories }}
                          {% if form.categories.errors %}
                          <span class="input-error error"><i class="fa fa-exclamation-circle"></i></span>
                          <span class="help-inline error">{{form.categories.errors}}</span>
                          {% endif %}
                        </div>
                      </div>


                      <div class="control-group">
                          <label class="control-label">Service Active</label>
                          <div class='controls'>
                              <div class="info-toggle-button service_active">
                                  {{form.service_active}}
                              </div>
                          </div>
                      </div>

                      <div class="control-group">
                          <label class="control-label">HiddenChannel</label>
                          <div class='controls'>
                              <div class="is_hidden">
                                  {{form.is_hidden}}
                              </div>
                          </div>
                      </div>

                        <div class="form-actions">
                          <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> Save</button>
                          <a href="{% url 'order:order-list-short' %}" type="button" class="btn btn-info"><i class="fa fa-times"></i> Cancel</a>
                        </div>
                      </div>
                    <div class="span4 ">
                      <div class="control-group control-group-centered">
                        <img id='thumbnail_preview' class="hide"/>
                      </div>
                    </div>
                  </div>
                </div>

          </div>
        </div>
      </div>
    </div>
  </form>

{#  {%if order %}#}
{#    {% include "order/_source.html" with title="order" content_type="order" pk=order.id source=mediasource_form%}#}
{#  {% endif %}#}

  {% include "modal/confirm_delete_ajax.html" with modal_title="Are you sure?" modal_body="Please confirm that you want to delete this order permanently." %}
{% endblock %}

{%block js%}
  <script src="{% static 'assets/jquery-ui/jquery-ui-1.9.2.custom.min.js' %}" type="text/javascript"></script>
  <script type="text/javascript" src="{% static 'assets/bootstrap-toggle-buttons/static/js/jquery.toggle.buttons.js' %}"></script>
  <script src="{% static 'assets/jquery-chosen/chosen.jquery.min.js' %}"></script>
  <script src="{% static 'js/common.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/order/order-edit.js' %}" type="text/javascript"></script>
{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{% static 'assets/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css' %}" />
  <link href="{% static 'assets/jquery-chosen/chosen.css' %}" type="text/css" rel="stylesheet">
{% endblock %}
